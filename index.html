import { useState } from 'react'
import { createClient } from '@supabase/supabase-js'

// Vercel-ga biz qo'ygan kalitlar bu yerda ishlaydi
const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY
)

export default function LoginPage() {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')

  const handleSignUp = async () => {
    const { error } = await supabase.auth.signUp({ email, password })
    if (error) alert(error.message)
    else alert("Emailingizni tasdiqlang!")
  }

  const handleLogin = async () => {
    const { error } = await supabase.auth.signInWithPassword({ email, password })
    if (error) alert(error.message)
    else window.location.href = '/' // Kirgach asosiy terminalga qaytadi
  }

  return (
    <div style={{ background: '#050505', color: '#00ff00', height: '100vh', padding: '40px', fontFamily: 'monospace' }}>
      <h2>{'>'} WEALTH_WISE_AUTH_SYSTEM</h2>
      <div style={{ border: '1px solid #333', padding: '20px', maxWidth: '400px' }}>
        <p>IDENTIFY YOURSELF:</p>
        <input 
          placeholder="EMAIL" 
          onChange={(e) => setEmail(e.target.value)}
          style={{ background: '#000', border: '1px solid #00ff00', color: '#00ff00', width: '100%', marginBottom: '10px', padding: '8px' }}
        />
        <input 
          type="password" 
          placeholder="PASSWORD" 
          onChange={(e) => setPassword(e.target.value)}
          style={{ background: '#000', border: '1px solid #00ff00', color: '#00ff00', width: '100%', marginBottom: '20px', padding: '8px' }}
        />
        <button onClick={handleLogin} style={{ background: '#00ff00', color: '#000', border: 'none', padding: '10px 20px', cursor: 'pointer', marginRight: '10px' }}>
          [ LOGIN ]
        </button>
        <button onClick={handleSignUp} style={{ background: 'transparent', color: '#00ff00', border: '1px solid #00ff00', padding: '10px 20px', cursor: 'pointer' }}>
          [ REGISTER ]
        </button>
      </div>
    </div>
  )
}
