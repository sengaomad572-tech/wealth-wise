<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Bozor</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#0b0f1a] text-white p-6">

    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold mb-6 italic text-blue-500">DUNYO BOZORI</h1>

        <div class="bg-slate-900 p-2 rounded-2xl mb-6 flex items-center border border-slate-800">
            <input type="text" id="symbolInput" placeholder="Masalan: AAPL, TSLA, NVDA" 
                   class="bg-transparent flex-1 p-3 outline-none font-bold uppercase">
            <button onclick="searchStock()" class="bg-blue-600 px-6 py-3 rounded-xl font-bold active:scale-95 transition">
                QIDIRISH
            </button>
        </div>

        <div id="stockCard" class="bg-slate-900 p-8 rounded-[30px] hidden border border-blue-900/30">
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h2 id="compName" class="text-4xl font-black italic">---</h2>
                    <p class="text-blue-400 text-xs mt-1 font-bold tracking-widest uppercase">Global Market</p>
                </div>
                <div id="price" class="text-3xl font-bold text-green-400">$0.00</div>
            </div>
            
            <div class="grid grid-cols-2 gap-4 text-sm">
                <div class="bg-black/20 p-4 rounded-2xl">
                    <p class="text-gray-500 text-[10px] uppercase">O'zgarish</p>
                    <p id="change" class="font-bold">0%</p>
                </div>
                <div class="bg-black/20 p-4 rounded-2xl">
                    <p class="text-gray-500 text-[10px] uppercase">Eng yuqori</p>
                    <p id="highPrice" class="font-bold">$0</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        async function searchStock() {
            const symbol = document.getElementById('symbolInput').value.toUpperCase().trim();
            if(!symbol) return alert("Iltimos, ramzni kiriting!");

            // DIQQAT: Agar xatolik bersa, bu API kaliti eskirgan bo'ladi.
            // O'zingiznikini olish uchun finnhub.io saytidan ro'yxatdan o'ting (bepul).
            const API_KEY = 'c8m69ka23it0883v500g'; 

            try {
                const res = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${API_KEY}`);
                const data = await res.json();

                if (data.d === null || data.c === 0) {
                    alert("Kompaniya topilmadi! Ramzni tekshiring (masalan: AAPL).");
                    return;
                }

                document.getElementById('stockCard').classList.remove('hidden');
                document.getElementById('compName').innerText = symbol;
                document.getElementById('price').innerText = '$' + data.c.toFixed(2);
                document.getElementById('highPrice').innerText = '$' + data.h.toFixed(2);
                
                const change = data.dp.toFixed(2);
                const changeEl = document.getElementById('change');
                changeEl.innerText = (change > 0 ? '+' : '') + change + '%';
                changeEl.style.color = change >= 0 ? '#4ade80' : '#f87171';

            } catch (e) {
                alert("Internet ulanishi yoki API bilan muammo!");
            }
        }
    </script>
</body>
</html>
