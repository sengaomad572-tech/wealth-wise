        const API_KEY = 'ct3v7i1r01qge76l9cagct3v7i1r01qge76l9cb0'; 

        // Zaxira ma'lumotlar bazasi (Agar API ishlamay qolsa)
        const backupData = {
            'AAPL': { c: 189.43, h: 191.00, l: 188.20, dp: 1.25 },
            'NVDA': { c: 875.10, h: 880.50, l: 860.00, dp: 4.30 },
            'TSLA': { c: 175.20, h: 178.00, l: 172.50, dp: -2.10 },
            'AMZN': { c: 178.50, h: 180.10, l: 177.30, dp: 0.85 },
            'MSFT': { c: 415.20, h: 420.00, l: 412.50, dp: 1.10 }
        };

        async function fetchStockData() {
            const symbol = document.getElementById('stockInput').value.toUpperCase();
            if (!symbol) return;

            document.getElementById('loading').classList.remove('hidden');
            document.getElementById('stockCard').classList.add('hidden');

            try {
                const res = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${API_KEY}`);
                const quote = await res.json();

                // Agar API'dan kelsa (d va c qiymatlari bor bo'lsa)
                if (quote.c && quote.c !== 0) {
                    displayData(symbol, quote);
                } else {
                    throw new Error("Zaxiraga o'tish");
                }
            } catch (error) {
                console.log("Zaxira ma'lumotlaridan foydalanilmoqda...");
                if (backupData[symbol]) {
                    displayData(symbol, backupData[symbol]);
                } else {
                    alert("Bu aksiya bo'yicha ma'lumot topilmadi. Iltimos AAPL, NVDA yoki TSLA deb yozib ko'ring.");
                }
            } finally {
                document.getElementById('loading').classList.add('hidden');
            }
        }

        function displayData(symbol, data) {
            document.getElementById('sName').innerText = symbol;
            document.getElementById('sPrice').innerText = "$" + data.c.toFixed(2);
            document.getElementById('sHigh').innerText = "$" + data.h.toFixed(2);
            document.getElementById('sLow').innerText = "$" + data.l.toFixed(2);
            
            const change = data.dp;
            const sChange = document.getElementById('sChange');
            sChange.innerText = (change > 0 ? "+" : "") + change.toFixed(2) + "% Today";
            
            const colorClass = change > 0 ? "text-emerald-400" : "text-rose-400";
            sChange.className = "text-xs font-bold uppercase mt-1 " + colorClass;
            document.getElementById('sPrice').className = "text-3xl font-black " + colorClass;

            const advice = document.getElementById('sAdvice');
            advice.innerText = change > 0 ? 
                "Bozorda ijobiy kayfiyat. Investorlar ushbu aktivga ishonch bildirmoqda." : 
                "Narxda biroz pasayish kuzatildi. Arzonroq sotib olish uchun qulay fursat bo'lishi mumkin.";

            document.getElementById('stockCard').classList.remove('hidden');
        }
