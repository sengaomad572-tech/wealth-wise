<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Terminal v1.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#05070a] text-white font-sans min-h-screen flex flex-col items-center p-6">

    <div class="w-full max-w-md mt-10">
        <header class="text-center mb-10">
            <h1 class="text-3xl font-black uppercase tracking-tighter">Market Search</h1>
            <p class="text-slate-500 text-[10px] uppercase tracking-[3px] mt-2">Step 1: Data Acquisition</p>
        </header>

        <div class="bg-[#0f172a] p-2 rounded-2xl flex items-center border border-slate-800 focus-within:border-blue-500 transition shadow-lg">
            <input type="text" id="symbolInput" placeholder="Enter Symbol (e.g. TSLA)" 
                   class="bg-transparent flex-1 p-3 outline-none font-bold uppercase text-blue-400 placeholder:text-slate-600">
            <button onclick="fetchStock()" class="bg-blue-600 hover:bg-blue-700 p-3 rounded-xl transition active:scale-95 text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </button>
        </div>

        <div id="resultCard" class="hidden mt-8 bg-[#0f172a] border border-slate-800 p-8 rounded-[32px] shadow-2xl animate-in fade-in zoom-in duration-300">
            <div class="flex justify-between items-start">
                <div>
                    <h2 id="dispSymbol" class="text-5xl font-black italic tracking-tighter text-white">---</h2>
                    <p class="text-blue-500 text-[10px] font-black mt-2 uppercase tracking-widest">Live Market Price</p>
                </div>
                <div id="dispPrice" class="text-3xl font-bold text-green-400">$0.00</div>
            </div>
            
            <div class="grid grid-cols-2 gap-6 mt-10 pt-6 border-t border-slate-800/50">
                <div>
                    <p class="text-slate-500 text-[10px] font-bold uppercase tracking-wider">Day High</p>
                    <p id="dispHigh" class="text-xl font-bold text-slate-200">$0.00</p>
                </div>
                <div>
                    <p class="text-slate-500 text-[10px] font-bold uppercase tracking-wider">Day Low</p>
                    <p id="dispLow" class="text-xl font-bold text-slate-200">$0.00</p>
                </div>
            </div>
        </div>

        <div id="status" class="text-center mt-8 text-slate-600 text-xs font-bold uppercase tracking-widest"></div>
    </div>

    <script>
        // Multi-token rotation to prevent "Error"
        const TOKENS = [
            'cn17639r01qht8f67i10cn17639r01qht8f67i1g',
            'c8m69ka23it0883v500g'
        ];

        async function fetchStock() {
            const sym = document.getElementById('symbolInput').value.toUpperCase().trim();
            const status = document.getElementById('status');
            const card = document.getElementById('resultCard');

            if(!sym) return;

            status.innerText = "Connecting to Global Exchange...";
            card.classList.add('hidden');

            let success = false;

            for(let token of TOKENS) {
                try {
                    const res = await fetch(`https://finnhub.io/api/v1/quote?symbol=${sym}&token=${token}`);
                    const data = await res.json();

                    if(data.c && data.c !== 0) {
                        document.getElementById('dispSymbol').innerText = sym;
                        document.getElementById('dispPrice').innerText = '$' + data.c.toFixed(2);
                        document.getElementById('dispHigh').innerText = '$' + data.h.toFixed(2);
                        document.getElementById('dispLow').innerText = '$' + data.l.toFixed(2);
                        
                        card.classList.remove('hidden');
                        status.innerText = "";
                        success = true;
                        break; 
                    }
                } catch (e) {
                    console.error("Token failed, trying next...");
                }
            }

            if(!success) {
                status.innerText = "Error: Invalid Symbol or API Limit Reached.";
            }
        }
    </script>
</body>
</html>
